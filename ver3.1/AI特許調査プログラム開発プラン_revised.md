# AI特許調査プログラム開発プラン (改訂版)

## 1. はじめに

本ドキュメントは、AIとの対話形式で検索条件を組み立てる革新的な特許調査プログラムの開発プランを定義するものです。
本プログラムは、自然言語での入力を可能とすることで、従来の複雑な特許検索インターフェースが抱える課題を解決し、先行技術調査や無効資料調査の効率を飛躍的に向上させることを目的とします。

**改訂のポイント:**
初期開発フェーズではUI（Streamlit）の実装は行わず、まず**Pythonスクリプト**として、プログラムの核となる**対話型の検索ロジック生成機能**の確立に注力します。

## 2. プログラムの全体像

### 2.1. アーキテクチャ

| モジュール | 役割 | 主な利用技術 |
| :--- | :--- | :--- |
| **① 対話インターフェース (CLI)** | ユーザーがコマンドライン上でAIと対話するためのインターフェース。 | Python `input()`, `print()` |
| **② 対話エンジン (LLM)** | ユーザーの自然言語を解釈し、検索キーワードや特許分類を生成するAIの中核。 | OpenAI API |
| **③ 検索クエリ生成エンジン** | 対話内容に基づき、BigQueryで実行可能なSQLクエリを動的に構築する。 | Python |
| **④ 特許検索エンジン** | 生成されたSQLクエリを使い、実際の特許データベースに問い合わせる。 | Google BigQuery (`patents-public-data`) |
| **⑤ 結果表示・分析モジュール** | 検索結果を要約・可視化し、ユーザーに分かりやすく提示する。 | OpenAI API, Matplotlib, Plotly |

### 2.2. 技術スタック

- **言語:** Python
- **LLM API:** OpenAI API
- **データベース:** Google BigQuery
- **データ可視化:** Matplotlib, Plotly (フェーズ2以降)
- **クラウド環境:** Google Cloud Platform (GCP)

## 3. 開発ロードマップ

### フェーズ1: 対話型検索ロジックの確立 (Pythonスクリプト)

**目的:** プログラムの核となる「対話による検索条件の生成」機能をPythonスクリプトとして実装し、その有効性を検証する。

- **Step 1.1: 対話による検索キーワード生成**
    - **内容:** ユーザーが入力した技術テーマを構成要素に分解し、同義語・関連語をAIが提案。ユーザーが選択することで、検索の**網羅性**を高める。
    - **タスク:**
        1. Pythonの`input()`関数でユーザーからの技術テーマを受け取る。
        2. OpenAI APIと連携し、テーマを分解してキーワード候補を生成するプロンプトを設計する。
        3. 候補を番号付きリストで提示し、ユーザーに選択させる対話フローを実装する。

- **Step 1.2: 対話による特許分類の推薦**
    - **内容:** 選択されたキーワードに基づき、関連性の高い特許分類（CPC）をAIが推薦。ユーザーが選択することで、検索の**精度**を高め、**ノイズ**を削減する。
    - **タスク:**
        1. OpenAI APIに対し、関連する特許分類とその平易な解説を問い合わせるプロンプトを設計する。
        2. 推薦された分類を番号付きリストで提示し、ユーザーに選択させる対話フローを実装する。

- **Step 1.3: 段階的な検索戦略の提案とクエリ生成**
    - **内容:** ユーザーの選択内容を元に、「高精度」「中範囲」「広範囲」といった複数の検索戦略をAIが提案。ユーザーが戦略を選択すると、対応するBigQueryのSQLクエリを生成する。
    - **タスク:**
        1. 選択されたキーワードと特許分類を組み合わせ、論理演算子（AND/OR）を適切に配置したSQLクエリを動的に生成するロジックを構築する。
        2. 複数の検索戦略（SQLクエリのバリエーション）を自動生成し、ユーザーに提示する機能を実装する。
        3. 最終的に生成されたSQLクエリをファイルに出力、または画面に表示する。

### フェーズ2: 検索実行と結果表示

**目的:** 生成したSQLクエリを実際に実行し、結果をコンソール上に表示する。

- **Step 2.1: BigQueryへの接続と検索実行**
- **Step 2.2: 検索結果の基本表示**

### フェーズ3: 分析機能の追加とUI化の検討

**目的:** 取得した特許情報をさらに分析・可視化し、プログラムの価値を高める。この段階でUI化を検討する。

- **Step 3.1: 検索結果のAI要約**
- **Step 3.2: 出願動向の可視化 (Matplotlib/Plotly)**
- **Step 3.3: StreamlitによるWeb UI化**

## 4. 必要な準備

- Google Cloud Platform (GCP) アカウント
- OpenAI APIキー
- BigQuery APIが有効化されたGCPプロジェクト
- BigQueryへのアクセス権を持つサービスアカウントキー（JSONファイル）
- Python 3.8以降の開発環境