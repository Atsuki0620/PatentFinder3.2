# AI特許調査プログラム開発プラン

## 1. はじめに

本ドキュメントは、AIとの対話形式で検索条件を組み立てる革新的な特許調査プログラムの開発プランを定義するものです。
本プログラムは、自然言語での入力を可能とすることで、従来の複雑な特許検索インターフェースが抱える課題を解決し、先行技術調査や無効資料調査の効率を飛躍的に向上させることを目的とします。

## 2. プログラムの全体像

### 2.1. アーキテクチャ

プログラムは、以下の4つの主要モジュールで構成されます。これらのモジュールが連携し、ユーザーとの対話から検索、結果の分析・表示までの一連のフローを実現します。

| モジュール | 役割 | 主な利用技術 |
| :--- | :--- | :--- |
| **① ユーザーインターフェース (UI)** | ユーザーがAIと対話するための画面。 | Streamlit |
| **② 対話エンジン (LLM)** | ユーザーの自然言語を解釈し、検索キーワードや特許分類を生成するAIの中核。 | OpenAI API |
| **③ 特許検索エンジン** | 生成された検索条件を使い、実際の特許データベースに問い合わせる。 | Google BigQuery (`patents-public-data`) |
| **④ 結果表示・分析モジュール** | 検索結果を要約・可視化し、ユーザーに分かりやすく提示する。 | OpenAI API, Matplotlib, Plotly |

### 2.2. 技術スタック

- **言語:** Python
- **UI:** Streamlit
- **LLM API:** OpenAI API
- **データベース:** Google BigQuery
- **データ可視化:** Matplotlib, Plotly
- **クラウド環境:** Google Cloud Platform (GCP)

### フェーズ1: プロトタイプ開発 (MVP)

**目的:** プログラムの核となる「対話による検索条件の生成」機能を実装し、基本コンセプトを検証する。

- **Step 1.1: 対話による検索キーワード生成**
    - **内容:** ユーザーが入力した技術テーマの文章から、関連する検索キーワードの候補を複数生成する。同義語、上位・下位概念などを考慮し、検索の網羅性を高める。
    - **タスク:**
        1. Streamlitで基本的な入力フォームと出力エリアを持つUIを構築する。
        2. OpenAI APIと連携し、ユーザーの入力に基づきキーワードを提案するプロンプトを設計する。
        3. ユーザーが提案されたキーワードを選択できるチェックボックスUIを実装する。

- **Step 1.2: 特許分類の推薦**
    - **内容:** ユーザーが入力した技術内容や選択したキーワードに基づき、関連性の高い特許分類（CPC）をAIに推薦させる。
    - **タスク:**
        1. OpenAI APIに対し、関連する特許分類とその理由を問い合わせるプロンプトを設計する。
        2. 推薦された分類を、解説付きでユーザーに提示し、選択させるUIを実装する。

### フェーズ2: 検索エンジンの統合

**目的:** 生成された検索条件を用いて、実際の特許データベースを検索し、結果を取得する機能を実装する。

- **Step 2.1: BigQueryへの接続と検索実行**
    - **内容:** フェーズ1で構築した検索条件（キーワードと特許分類）を元にSQLクエリを動的に生成し、Google BigQueryの公開特許データセットに対して検索を実行する。
    - **タスク:**
        1. GCPプロジェクトを設定し、BigQuery APIを有効化する。
        2. Python用Google Cloudクライアントライブラリを導入し、サービスアカウントキーによる認証を設定する。
        3. ユーザーの選択に応じて、AND/ORを組み合わせたSQLクエリを自動生成するロジックを実装する。
        4. BigQueryにクエリを送信し、結果を取得する機能を実装する。

- **Step 2.2: 検索結果の基本表示**
    - **内容:** BigQueryから取得した特許情報（特許番号、発明の名称、要約など）をUIに一覧表示する。
    - **タスク:**
        1. 検索結果を整形し、Streamlitのデータフレームやテーブルコンポーネントで見やすく表示する。

### フェーズ3: 結果の分析と可視化

**目的:** 取得した特許情報を加工し、ユーザーが洞察を得やすい形で提示する。

- **Step 3.1: 検索結果のAI要約**
    - **内容:** 取得した個々の特許公報の要約文をさらにLLMに渡し、より簡潔なサマリーを生成する。
    - **タスク:**
        1. 検索結果の「要約」をOpenAI APIに送信し、「この特許を3行で要約して」といったプロンプトで要約を生成させる。
        2. 生成された要約を、各特許のタイトルと共に表示する。

- **Step 3.2: 出願動向の可視化**
    - **内容:** 検索結果全体の傾向を分析し、グラフで可視化する（例：年次別出願件数推移、出願人ランキング）。
    - **タスク:**
        1. 出願日や出願人といった情報を元に、集計用のSQLクエリをBigQueryで実行する。
        2. MatplotlibやPlotlyを使い、集計結果を棒グラフや円グラフとして描画する。
        3. 生成されたグラフをStreamlitのUIに埋め込む。

## 4. 考慮事項

- **検索精度:** AIが生成する条件の「検索漏れ」と「ノイズ」のバランスを常に意識し、ユーザーが容易に条件を編集・調整できるUIを提供する。
- **LLMのハルシネーション:** AIが事実に基づかない情報を生成する可能性を考慮し、最終的には人間が確認するプロセスを設ける。
- **専門用語への対応:** 特定業界の専門用語を解釈できない場合に備え、ユーザーが簡易的な辞書を登録できる機能の追加を検討する。

## 5. 必要な準備

- Google Cloud Platform (GCP) アカウント
- OpenAI APIキー
- BigQuery APIが有効化されたGCPプロジェクト
- BigQueryへのアクセス権を持つサービスアカウントキー（JSONファイル）
- Python 3.8以降の開発環境